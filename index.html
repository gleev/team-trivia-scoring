<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Team Trivia Scoring</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script src="js/yepnope.1.5.4-min.js"></script>
        <script type="text/javascript">
        function cssLoaded(href) {
            var cssFound = false;

            for (var i = 0; i < document.styleSheets.length; i++) {
                sheet = document.styleSheets[i];
                if (sheet['href'].indexOf(href) >= 0 && sheet['cssRules'].length > 0) {
                    cssFound = true;
                }
            };

            return cssFound;
        }

        yepnope([{
            load: '//ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.1.min.js',
            complete: function () {
                if (!window.jQuery) {
                    yepnope('js/jquery-1.8.1.min.js');
                }
            }
        }, {
            load: '//netdna.bootstrapcdn.com/twitter-bootstrap/2.1.1/js/bootstrap.min.js',
            complete: function () {
                if (!$.fn.button) { // just picked a random element from the bootstrap to test
                    yepnope('js/bootstrap.min.js');
                }
            }
        }, {
            load: '//netdna.bootstrapcdn.com/twitter-bootstrap/2.1.1/css/bootstrap-combined.min.css'
        }, {
            test: cssLoaded('bootstrap-combined.min.css'),
            nope: 'css/bootstrap.min.css'
        }, {
            load: 'css/scoring.css'
        }, {
            load: 'js/knockout-2.1.0.js'
        }, {
            load: 'js/scoring.js'
        }]);
        </script>
    </head>
    <body>
        <div id="container">
            <div class="navbar">
                <div class="navbar-inner">
                    <span class="brand">Team Trivia Scoring</span>
                    <form class="navbar-form pull-right" data-bind="submit: setRowsFromForm">
                        <input name="numRows" type="text" class="input-mini" data-bind="value: scores().length">
                        <button type="submit" class="btn">Set # Teams</button>
                    </form>
                </div>
            </div>
            <table class="table table-bordered table-hover">
                <thead>
                    <tr>
                        <th rowspan="2">League #</th>
                        <th rowspan="2">Team Name</th>
                        <th rowspan="2"># Players</th>
                        <th colspan="4">Round 1</th>
                        <th colspan="4">Round 2</th>
                        <th colspan="4">Round 3</th>
                        <th rowspan="2">1st Half Bonus</th>
                        <th rowspan="2">1/2 Time Question</th>
                        <th rowspan="2">1st Half Total</th>
                    </tr>
                    <tr>
                        <th>1</th>
                        <th>2</th>
                        <th>3</th>
                        <th>Total</th>
                        <th>4</th>
                        <th>5</th>
                        <th>6</th>
                        <th>Total</th>
                        <th>7</th>
                        <th>8</th>
                        <th>9</th>
                        <th>Total</th>
                    </tr>
                </thead>
                <tbody data-bind="foreach: scores">
                    <tr>
                        <td>
                            <div class="control-group" data-bind="css: { error: invalidLeagueId() }">
                            <div class="input-append">
                                <input type="text" class="input-xmini" data-bind="value: leagueId">
                                <span class="add-on">WI</span>
                            </div>
                            </div>
                        </td>
                        <td><span class="input-xlarge uneditable-input left" data-bind="text: teamName"></span></td>
                        <td><input type="text" class="input-xxmini"></td>
                        <td>
                            <select class="input-xmini" data-bind='value: q1, options: $parent.validScores, optionsText: function (item) { return item.text }, optionsValue: function (item) { return item.value }'></select>
                        </td>
                        <td>
                            <div class="control-group" data-bind="css: { error: isQ2Dupe() }">
                                <select class="input-xmini" data-bind='value: q2, options: $parent.validScores, optionsText: function (item) { return item.text }, optionsValue: function (item) { return item.value }'></select>
                            </div>
                        </td>
                        <td>
                            <div class="control-group" data-bind="css: { error: isQ3Dupe() }">
                                <select class="input-xmini" data-bind='value: q3, options: $parent.validScores, optionsText: function (item) { return item.text }, optionsValue: function (item) { return item.value }'></select>
                            </div>
                        </td>
                        <td><span class="input-xxmini uneditable-input" data-bind="text: r1"></span></td>
                        <td>
                            <select class="input-xmini" data-bind='value: q4, options: $parent.validScores, optionsText: function (item) { return item.text }, optionsValue: function (item) { return item.value }'></select>
                        </td>
                        <td>
                            <div class="control-group" data-bind="css: { error: isQ5Dupe() }">
                                <select class="input-xmini" data-bind='value: q5, options: $parent.validScores, optionsText: function (item) { return item.text }, optionsValue: function (item) { return item.value }'></select>
                            </div>
                        </td>
                        <td>
                            <div class="control-group" data-bind="css: { error: isQ6Dupe() }">
                                <select class="input-xmini" data-bind='value: q6, options: $parent.validScores, optionsText: function (item) { return item.text }, optionsValue: function (item) { return item.value }'></select>
                            </div>
                        </td>
                        <td><span class="input-xxmini uneditable-input" data-bind="text: r2"></span></td>
                        <td>
                            <select class="input-xmini" data-bind='value: q7, options: $parent.validScores, optionsText: function (item) { return item.text }, optionsValue: function (item) { return item.value }'></select>
                        </td>
                        <td>
                            <div class="control-group" data-bind="css: { error: isQ8Dupe() }">
                                <select class="input-xmini" data-bind='value: q8, options: $parent.validScores, optionsText: function (item) { return item.text }, optionsValue: function (item) { return item.value }'></select>
                            </div>
                        </td>
                        <td>
                            <div class="control-group" data-bind="css: { error: isQ9Dupe() }">
                                <select class="input-xmini" data-bind='value: q9, options: $parent.validScores, optionsText: function (item) { return item.text }, optionsValue: function (item) { return item.value }'></select>
                            </div>
                        </td>
                        <td><span class="input-xxmini uneditable-input" data-bind="text: r3"></span></td>
                        <td><input type="text" class="input-xxmini" data-bind="value: bonus"></td>
                        <td><input type="text" class="input-xxmini" data-bind="value: halftime"></td>
                        <td><span class="input-xxmini uneditable-input" data-bind="text: total"></span></td>
                    </tr>                    
                </tbody>
            </table>
        </div>
    </body>
</html>
